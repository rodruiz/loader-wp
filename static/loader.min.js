!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=jQuery},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);window.loaderVersion="1.0",window.loaderBuild="20180730.3",window.MG2Loader=function(e){var t="0123456789ABCDEFGHIJKLMNOPQabcdefghijklmnopqrstuvwxyz",n=2,r=3,o={ResourceValidationError:"ResourceValidationError",ResourceWasNotLoaded:"ResourceWasNotLoaded",OptionsHaveDuplicateURLs:"OptionsHaveDuplicateURLs",ConfigFileNotFound:"ConfigFileNotFound",JsValidationError:"JsValidationError"},i={defaultResourceURLs:{FP:"https://fp-cdn.azureedge.net/",DL:"https://g2insights-cdn.azureedge.net/",NXT:"https://cdn.ayc0zsm69431gfebd.xyz/",FZ:"https://flittz-cdn.azureedge.net/"},fileNames:{FP:"fp",DL:"mg2-data-extension",NXT:"t8y9347t",FZ:"Flittz"},blockAttempts:2,environment:"prod",appInsightsKey:null,globalNames:{FZ:String.fromCharCode.apply(null,[70,108,105,116,116,122]),NXT:String.fromCharCode.apply(null,[67,111,110,110,101,120,116]),FP:String.fromCharCode.apply(null,[70,105,110,103,101,114,112,114,105,110,116]),DL:String.fromCharCode.apply(null,[77,71,50,73,110,115,105,103,104,116,115])}},s={},a=["FP","DL","NXT","FZ"],u="https://loader-cdn.azureedge.net/__ENVIRONMENT__/__CLIENT_CODE__/loader-config.json",l={localhost:"localhost",dev:"dev",test:"test",test20:"test20",demo:"demo",stage:"stage",preprod:"preprod",prod:"prod"},c={demo:"96000fb4-875d-4856-b663-a08d1b241b20",prod:"8241cbc2-50a5-47c4-b91f-462506490fad",stage:"13f32af2-08e3-4579-8fcf-ff76d2477913",preprod:"7ca2e09a-3797-4a5b-9d7e-40a2e44d6efc"},d={default:1,dynamic:2,predefined:3},p=null,h=null,f=[C,function(e){for(var n,r,o,i,s="",a=0;a<e.length;a++)n=e.substring(a,a+1),r=t.indexOf(n),o=1^r,i=t.substring(o,o+1),s+=i;return s},function(e){for(var n=ifPC=0,r=0,o="Secret key",i="",s=0;s<o.length;s++)n+=o.charCodeAt(s);maxPCmod=n;for(var s=0;s<e.length;s++){r==o.length&&(r=0),maxPCmod<1&&(maxPCmod=n+ifPC);var a=maxPCmod%o.charCodeAt(r),u=e.charCodeAt(s)+a;ifPC+=maxPCmod%o.charCodeAt(r),maxPCmod-=o.charCodeAt(r),r++,i+=parseInt(u/52)+t.charAt(parseInt(u%52))}return i},function(e){return e[0]+e[e.length-1]+e.length+e[e.length-1]+e[0]+"rr"+e.length+"j"},function(e){var t="";if(e.split("").forEach(function(e){t+=String.fromCharCode(e.charCodeAt()+2)+e+String.fromCharCode(e.charCodeAt()-2)}),(t=t.replace(/[^a-z0-9]/gi,"")).length<8)for(var n=t.length;n<8;n++)t+=String.fromCharCode(96+2*n);return t}];function m(t,o){t.name!=a[n]&&t.name!=a[r]||function(t,n){var r=e("<link>");e("head").append(r),r.attr({id:t.name+"_CSS",rel:"stylesheet",type:"text/css",href:encodeURI(n)})}(t,o.css),t.initOptions.environment!==l.localhost&&(t.initOptions.resourceUrl=o.resourceUrl.path+o.environmentSegment+"/"),o.resourceUrl.saveAsCurrent()}function g(){s.plugins.forEach(function(e){var t=s.globalNames[e.name];window[t]&&window[t].init&&window[t].init(e.initOptions)})}function R(e){this.name="string"==typeof e.name?e.name.toUpperCase():"",this.initOptions=e.initOptions||{},this.environment=this.getEnvironment(),this.version=this.getVersion(),this.minified=this.isMinified(),this.required=!0===e.required,this.fileName=s.fileNames[this.name],this.mode=this.getMode(),this.resourceURLs=[],this.loadAttempts=s.loadAttempts,this.usedLoadAttempts=0,this.nextResourceUrlIndex=0,this.globalName=s.globalNames[this.name],this.mode===d.predefined&&(this.resourceURLs=s.predefinedResourceURLs[this.name]),this.mode===d.dynamic&&(this.resourceURLs=this.generateCDNsByCode(s.xCode)),this.mode===d.default?this.loadAttempts=1:this.loadAttempts=this.loadAttempts||this.resourceURLs.length+1}function v(){this.storageKey="nxt_ldr_rsrc_rls",this.defaulLoaderData={cRs:{},bRs:{},xC:null}}function y(e,t){t=t||{},e=e||"",this.path=function(e){return e&&e.lastIndexOf("/")!==e.length-1?e+"/":e}(e),this.index=t.index,this.isDefault=t.isDefault||!1,this.pluginName=t.pluginName}function U(e,t){if(e||s&&s.appInsightsKey)try{p=function(e){function t(e){o[e]=function(){var t=arguments;o.queue=o.queue||[],o.queue.push(function(){o[e].apply(o,t)})}}var n,r,o={config:e},i=document,s=window,a="script",u="AuthenticatedUserContext",l="start",c="stop",d="Track",p=d+"Event",h=d+"Page",f=i.createElement(a);f.src=e.url||"https://az416426.vo.msecnd.net/scripts/a/ai.0.js",i.getElementsByTagName(a)[0].parentNode.appendChild(f);try{o.cookie=i.cookie}catch(e){}for(o.queue=[],o.version="1.0",n=["Event","Exception","Metric","PageView","Trace","Dependency"];n.length;)t("track"+n.pop());return t("set"+u),t("clear"+u),t(l+p),t(c+p),t(l+h),t(c+h),t("flush"),e.disableExceptionTracking||(t("_"+(n="onerror")),r=s[n],s[n]=function(e,t,i,s,a){var u=r&&r(e,t,i,s,a);return!0!==u&&o["_"+n](e,t,i,s,a),u}),o}({instrumentationKey:e||s.appInsightsKey,disableExceptionTracking:!0,disableAjaxTracking:!0}),window.appInsights=p}catch(e){p=null}else p=c[t.environment]}function C(e){return btoa(e).replace(/[^a-z0-9]/gi,"")}function L(t){return t.appInsightsKey||delete t.appInsightsKey,"number"!=typeof t.blockAttempts&&null!==t.blockAttempts&&delete t.blockAttempts,"number"!=typeof t.loadAttempts&&null!==t.loadAttempts&&delete t.loadAttempts,"boolean"!=typeof t.randomURLChoosing&&delete t.randomURLChoosing,t.fileNames&&e.each(t.fileNames,function(e,n){t.fileNames[e]||delete t.fileNames[e]}),t.defaultResourceURLs&&e.each(t.defaultResourceURLs,function(e,n){t.defaultResourceURLs[e]||delete t.defaultResourceURLs[e]}),t.predefinedResourceURLs&&(e.each(t.predefinedResourceURLs,function(e,n){t.predefinedResourceURLs&&t.predefinedResourceURLs[e].length||delete t.predefinedResourceURLs[e]}),e.isEmptyObject(t.predefinedResourceURLs)&&(t.predefinedResourceURLs=null)),t}function x(e){return("string"==typeof e||e instanceof String)&&l[e.toLowerCase()]}function b(e,t){return Math.floor(Math.random()*(t-e+1))+e}function N(e){return String.fromCharCode(e)}return R.prototype.getSource=function(){var e=null,t=this.minified?".min":"";e=this.mode===d.default?this.getDefaultResourceUrl():this.getResourceUrl();var n=this.mode!==d.dynamic||e.isDefault?this.environment:C(this.environment),r=this.mode!==d.dynamic||e.isDefault?this.version:C(this.version);return{resourceUrl:e,js:e.path+n+"/"+r+"/"+this.fileName+t+".js",css:e.path+n+"/"+r+"/"+this.fileName+t+".css",environmentSegment:n,versionSegment:r}},R.prototype.getVersion=function(){return this.name===a[n]&&(this.initOptions.environment===l.stage||this.initOptions.environment===l.prod)?this.initOptions.clientCode:this.initOptions.version},R.prototype.getEnvironment=function(){return x(s.environment)?s.environment.toLowerCase():x(this.initOptions.environment)?this.initOptions.environment.toLowerCase():l.prod},R.prototype.getMode=function(){return s.predefinedResourceURLs&&Array.isArray(s.predefinedResourceURLs[this.name])&&s.predefinedResourceURLs[this.name].length>0?d.predefined:!s.predefinedResourceURLs&&s.xCode?d.dynamic:d.default},R.prototype.isMinified=function(){return this.environment===l.demo||this.environment===l.stage||this.environment===l.prod},R.prototype.validate=function(){this.validateVersion(),this.validateName(),this.validateURLs()},R.prototype.validateVersion=function(){if(this.name===a[n]&&(this.environment===l.stage||this.environment===l.prod)){if(!this.initOptions.clientCode)throw{name:"nxtError",message:"Please, set clientCode property into InitOptins object! Plugin name: "+this.name+". "}}else if(!this.initOptions.version)throw{name:"nxtError",message:"Please, set version property into InitOptins object! Plugin name: "+this.name+". "}},R.prototype.validateName=function(){if(!this.name)throw{name:"nxtError",message:"Please, set name property into plugin options. "}},R.prototype.validateURLs=function(){this.resourceURLs=this.resourceURLs.filter(function(e){return function(e){return new RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i").test(e)}(e)});var e=this.resourceURLs.map(function(e){return{count:1,url:e}}).reduce(function(e,t){return e[t.url]=(e[t.url]||0)+t.count,e},{}),t=Object.keys(e).filter(function(t){return e[t]>1});t.length>0&&p&&p.trackEvent(o.OptionsHaveDuplicateURLs,{plugin:this.name,duplicates:t.toString()})},R.prototype.generateCDNsByCode=function(e){return this.xCodeCDNs=[],f.forEach(function(t){var n="https://cdn."+t(e)+".com/";this.xCodeCDNs.push(n)}.bind(this)),this.xCodeCDNs},R.prototype.getResourceUrl=function(){var e=this.getStoredResourceUrl();return e.path?e:((e=s.randomURLChoosing?this.resourceURLs.length!=this.usedLoadAttempts?this.getRandomResourceUrl():this.getDefaultResourceUrl():this.getConsistentResourceUrl()).path||(e=this.getDefaultResourceUrl()),e.isDefault&&!e.index&&(e.index=this.resourceURLs.length),this.nextResourceUrlIndex=e.index+1,e)},R.prototype.getStoredResourceUrl=function(){h.getStoredData();var e=(h.getStoredData().cRs||{})[this.name],t=void 0!==e?function(e){return e.charCodeAt()}(e):null,n="",r=!1;return t===this.resourceURLs.length?(n=this.getDefaultResourceUrl().path,r=!0):t&&(n=this.resourceURLs[t]),new y(n,{index:t,isDefault:r,pluginName:this.name})},R.prototype.getRandomResourceUrl=function(){for(var e,t=null,n=0;n<this.resourceURLs.length;n++)if(e=b(0,this.resourceURLs.length-1),!(t=new y(this.resourceURLs[e],{index:e,pluginName:this.name})).checkBlock())return t;return new y},R.prototype.getConsistentResourceUrl=function(){for(var e=null,t=this.nextResourceUrlIndex;t<this.resourceURLs.length;t++)if(!(e=new y(this.resourceURLs[t],{index:t,pluginName:this.name})).checkBlock())return e;return new y},R.prototype.getDefaultResourceUrl=function(){return new y(s.defaultResourceURLs[this.name],{isDefault:!0,pluginName:this.name,index:this.resourceURLs.length})},R.prototype.hasUnblockedUrls=function(){var e=!1;if(this.mode===d.default)return e;for(var t=h.getStoredData().bRs[this.name],n=0;n<this.resourceURLs.length;n++){if(t[N(n)]!==s.blockAttempts){e=!0;break}}return e},v.prototype.getStoredData=function(){try{return JSON.parse(localStorage.getItem(this.storageKey))||this.defaulLoaderData}catch(e){return console.error(e),this.defaulLoaderData}},v.prototype.storeData=function(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error(e)}},v.prototype.checkUpdates=function(e){var t=this.getStoredData();t.xC!==e&&(t={xC:e,cRs:{},bRs:{}},this.storeData(t))},v.prototype.deleteCurrentResource=function(e){var t=h.getStoredData();t.cRs&&(delete t.cRs[e],h.storeData(t))},y.prototype.saveAsCurrent=function(){var e=h.getStoredData();e.cRs[this.pluginName]=N(this.index),h.storeData(e)},y.prototype.saveAsBlocked=function(){var e=h.getStoredData(),t=N(this.index);e.bRs[this.pluginName]||(e.bRs[this.pluginName]={}),e.bRs[this.pluginName][t]||(e.bRs[this.pluginName][t]=0),e.bRs[this.pluginName][t]+=1,h.storeData(e)},y.prototype.checkBlock=function(){var e=h.getStoredData();return e.bRs&&e.bRs[this.pluginName]&&e.bRs[this.pluginName][N(this.index)]>=s.blockAttempts},{init:function(t){if(!t||!t.plugins||!t.plugins.length)throw{name:"nxtError",message:"Plugins are required for loader. Please, specify at least one plugin for downloading. "};return t.appInsightsKey&&U(t.appInsightsKey),function(t){let n=u.replace("__ENVIRONMENT__",t.environment).replace("__CLIENT_CODE__",t.version);return e.ajax({url:n,cache:!0,ifModified:!0,crossOrigin:!0}).then(function(t){return e.when(t)},function(){return p||U(i.appInsightsKey,t),p&&p.trackEvent(o.ConfigFileNotFound,{configUrl:n}),e.when({})})}(t).then(function(n){return s=e.extend(!0,s,i,L(n),L(t)),p||U(),function(e){var t=[];e.plugin={},e.plugins.forEach(function(n){var r=new R(n);try{r.validate(),t.push(r),e.plugin[r.name]=r}catch(e){p&&p.trackEvent(o.ResourceValidationError,{plugin:r.name,attempt:r.usedLoadAttempts})}}),e.plugins=t}(s),(h=new v).checkUpdates(s.xCode),function(t){var n=[];return t.forEach(function(t){var r=t.getSource();n.push(function t(n,r,i){i=i||e.Deferred();var s={url:r.js,crossOrigin:!0,dataType:"script",cache:!0,ifModified:!0,success:function(){m(n,r),i.resolve()},error:function(e){if(200==e.status)m(n,r),p&&p.trackEvent(o.JsValidationError,{plugin:n.name,url:r.js}),i.resolve();else{r.resourceUrl.isDefault||0!==e.status||r.resourceUrl.saveAsBlocked(),r.resourceUrl.isDefault&&(n.nextResourceUrlIndex=0),h.deleteCurrentResource(n.name);var s=(!r.resourceUrl.isDefault||r.resourceUrl.isDefault&&n.hasUnblockedUrls())&&n.loadAttempts>n.usedLoadAttempts;if(s){var a=n.getSource();t(n,a,i)}else n.required?i.reject():i.resolve();p&&p.trackEvent(o.ResourceWasNotLoaded,{plugin:n.name,url:r.js,attempt:n.usedLoadAttempts,statusCode:e.status})}}};return e.fn.jquery.split(".")[0]<2&&delete s.dataType,e.ajax(s),n.usedLoadAttempts+=1,i.promise()}(t,r))}),e.when.apply(e,n)}(s.plugins).then(g)})},GetVersionInfo:function(){return"Version: "+window.loaderVersion+", Build: "+window.loaderBuild}}}(o.a)}]);
//# sourceMappingURL=loader.min.js.map